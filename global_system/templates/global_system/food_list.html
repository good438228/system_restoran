{% extends 'global_system/base.html' %}

{% block title %}Меню | La Passion{% endblock %}

{% block content %}
<div class="container">
    <section class="text-center py-5 mb-5 position-relative overflow-hidden rounded-4 shadow-sm"
        style="background: linear-gradient(135deg, rgba(42,157,143,0.85), rgba(38,70,83,0.85)),
               url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover;">
        <div class="position-relative z-2">
             <h1 class="display-5 fw-bold mb-3" style="font-family: 'Montserrat', sans-serif; color: #e9c46a;">La passion</h1>
            <p class="lead mb-4" style="color:#ffffff;">Ресторан</p>
            <form class="d-flex justify-content-center" method="get" action="{% url 'food_list' %}">
                <div class="input-group" style="max-width: 480px;">
                    <input class="form-control shadow-sm"
                           type="search"
                           name="search"
                           placeholder="Найти блюдо..."
                           value="{{ search_query }}"
                           style="border-radius:30px 0 0 30px; border:none;">
                    <button class="btn px-4"
                            type="submit"
                            style="border-radius:0 30px 30px 0; border:none; background:#e76f51; color:#fff; font-weight:500;">
                        <i class="fas fa-search me-1"></i> Найти
                    </button>
                </div>
            </form>
        </div>
    </section>

    {% if search_query %}
    <div class="mb-4 text-center">
        <h4 class="fw-semibold">Результаты поиска для «{{ search_query }}»</h4>
    </div>
    {% endif %}
    <div class="row g-4">
        {% for food in foods %}
        <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden hover-card"
                 style="transition: all .3s ease; background: #fff;">
                {% if food.photo %}
                <div class="overflow-hidden" style="height: 200px;">
                    <img src="{{ food.photo.url }}" alt="{{ food.name }}"
                         class="card-img-top"
                         style="height: 100%; width: 100%; object-fit: cover; transition: transform .5s ease;">
                </div>
                {% endif %}
                <div class="card-body d-flex flex-column p-3">
                    <h5 class="card-title fw-bold text-dark mb-2">{{ food.name }}</h5>
                    <p class="card-text text-muted small mb-3">{{ food.description|truncatechars:90 }}</p>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="fw-bold text-success fs-5">{{ food.price }} $</span>
                    </div>
                    <form action="{% url 'add_to_cart' food.id %}" method="post" class="mt-auto">
                        {% csrf_token %}
                        <button type="submit"
                                class="btn w-100 fw-semibold mb-2"
                                style="background:#2a9d8f; color:#fff; border:none; border-radius:10px; padding:.6rem 0; transition: background .3s;">
                            <i class="fas fa-cart-arrow-down me-2"></i> В корзину
                        </button>
                        <a href="{% url 'food_detail' food.id %}"
                           class="btn w-100 fw-semibold"
                           style="border-radius:10px; border:1px solid #ccc; color:#333; background:#fff;">
                            <i class="fas fa-eye me-1"></i> Смотреть
                        </a>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<style>
.hover-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}
.hover-card:hover img {
    transform: scale(1.05);
}
</style>
{% endblock %}
